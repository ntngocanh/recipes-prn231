@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@{
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}
<div class="container">
    
    <input id="startDate" type="date">
    <input id="endDate" type="date">

    <div id="chartContainer" style="height: 370px; width: 100%;"></div>
    <div id="PiechartContainer" style="height: 370px; width: 100%;"></div>
</div>

<script>
    $(document).ready(function () {
        $.noConflict();
        var dataPoints = [];
        var PieData = [];
        var options = {
            animationEnabled: true,
            theme: "light2",
            title: {
                text: "Daily Sales Data"
            },
            axisX: {
                valueFormatString: "DD MMM YYYY",
            },
            axisY: {
                title: "USD",
                titleFontSize: 24
            },
            data: [{
                type: "spline",
                yValueFormatString: "$#,###.##",
                dataPoints: dataPoints
            }]
        };

        function addData(data) {
            for (let i = 0; i < data.length; i++) {
                dataPoints.push({
                    x: new Date(data[i].date),
                    y: data[i].numberOfRecipe
                });
            }
            $("#chartContainer").CanvasJSChart(options);

        }
        function addDataPie(data) {
            for (let i = 0; i < data.length; i++) {
                PieData.push({
                    y: data[i].percentage,
                    label: data[i].role
                });
               
            }
            $("#PiechartContainer").CanvasJSChart(Pieoptions);

        }
        $.getJSON("https://localhost:5001/api/Recipes/Statistic", addData);
        $.getJSON("https://localhost:5001/api/Users/Statistic", addDataPie);
        var Pieoptions = {
            title: {
                text: "Desktop OS Market Share in 2017"
            },
            subtitles: [{
                text: "As of November, 2017"
            }],
            animationEnabled: true,
            data: [{
                type: "pie",
                startAngle: 40,
                toolTipContent: "<b>{label}</b>: {y}%",
                showInLegend: "true",
                legendText: "{label}",
                indexLabelFontSize: 16,
                indexLabel: "{label} - {y}%",
                dataPoints: PieData
            }]
        };
       

    
    });
</script>

<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>